const posts={data:{get:function(e,t){return new Promise(function(r,n){let u=new FormData;return u.append("action","get"),ui.Request({url:"/wall"+e.toString()+"_"+t.toString(),method:"POST",data:u,success:function(e){return(e=JSON.parse(e)).unauth?settings.raLogin():e.error?n(new TypeError("Post fetching error")):r(e)}})})}},getAll:function(e,t,r){return new Promise(function(n,u){if(r<=0||t<0)return u(new TypeError("Offset or count is invalid"));let o=new FormData;return o.append("action","get_posts"),o.append("offset",t.toString()),o.append("count",r.toString()),ui.Request({data:o,method:"POST",url:0===e?"/":e>0?"/id"+e:"/bot"+-1*e,success:function(e){return(e=JSON.parse(e)).unauth?settings.raLogin():e.error?u(new TypeError("Post load error")):n(e,t)}})})},comments:{get:function(e,t,r=10,n=0){return new Promise(function(u,o){let i=new FormData;return i.append("action","get_comments"),i.append("count",Number(r)||10),i.append("offset",Number(n)||0),ui.Request({url:"/wall"+e.toString()+"_"+t.toString(),data:i,method:"POST",success:function(e){return(e=JSON.parse(e)).unauth?settings.raLogin():e.error?o(new TypeError("Comments fetching error")):u(e)}})})},send:function(e,t,r="",n=""){return new Promise(function(u,o){if((r.isEmpty()||r.length>4096)&&n.isEmpty())return o(new TypeError("Comment data is incorrect"));let i=new FormData;return i.append("action","create_comment"),i.append("text",r),i.append("attachments",n),ui.Request({data:i,method:"POST",url:"/wall"+Number(e).toString()+"_"+Number(t).toString(),success:function(e){return(e=JSON.parse(e)).unauth?settings.raLogin():e.error?o(new TypeError("Comment send error")):u(e)}})})},delete:function(e,t,r){return new Promise(function(n,u){let o=new FormData;return o.append("action","delete_comment"),o.append("comment_id",Number(r)||0),ui.Request({method:"POST",data:o,url:"/wall"+Number(e)+"_"+Number(t),success:function(e){try{return e.unauth?settings.raLogin():(e=JSON.parse(e)).error||!e.success?u(new TypeError("Comment deletion failed.")):n(!0)}catch(e){return u(e)}}})})}},actions:{pin:function(e){return new Promise(function(t,r){let n=new FormData;return n.append("action","pin"),ui.Request({url:"/wall"+Number(e.user_id)+"_"+Number(e.id),data:n,method:"POST",success:function(r){try{if((r=JSON.parse(r)).unauth)return settings.raLogin();-1===r.result?e.is_pinned=0:e.is_pinned=1,pages.elements.post(e).then(function(e){return t(e)}).catch(function(e){return t(!1)})}catch(e){return t(!1)}}})})},unpin:function(e){return posts.actions.pin(e)},delete:function(e,t){return new Promise(function(r,n){let u=new FormData;return u.append("action","delete"),ui.Request({url:"/wall"+Number(e)+"_"+Number(t),data:u,method:"POST",success:function(e){try{return(e=JSON.parse(e)).unauth?settings.raLogin():e.error?r(!1):r(!0)}catch(e){return r(!1)}}})})},edit:function(e,t,r,n=""){return new Promise(function(u,o){if(!settings.users.current)return o(new TypeError("You are must be logged in to do this"));if(String(r).isEmpty()&&String(n).isEmpty())return o(new TypeError("Text or attachments must be provided"));if(String(r).length>8192)return o(new TypeError("Text is too long"));let i=new FormData;return i.append("action","edit_post"),i.append("wall_id",Number(e)),i.append("post_id",Number(t)),i.append("text",String(r)),i.append("attachments",String(n)),ui.Request({url:"/flex",method:"POST",data:i,success:function(e){try{return(e=JSON.parse(e)).unauth?settings.raLogin():e.error?o(new TypeError("Post creation error")):u(e.response)}catch(e){return o(e)}}})})},create:function(e,t="",r=""){return new Promise(function(n,u){if(!settings.users.current)return u(new TypeError("You are must be logged in to do this"));let o=e||settings.users.current.user_id;if(String(t).isEmpty()&&String(r).isEmpty())return u(new TypeError("Text or attachments must be provided"));if(String(t).length>8192)return u(new TypeError("Text is too long"));let i=new FormData;return i.append("action","publish_post"),i.append("wall_id",Number(o)),i.append("text",String(t)),i.append("attachments",String(r)),ui.Request({url:"/flex",method:"POST",data:i,success:function(e){try{return(e=JSON.parse(e)).unauth?settings.raLogin():e.error?u(new TypeError("Post creation error")):n(e.response)}catch(e){return u(e)}}})})}}},likes={set:function(e,t){let r=new FormData;return r.append("action","like"),ui.Request({url:"/"+e,method:"POST",data:r,success:function(e){try{if((e=JSON.parse(e)).unauth)return settings.raLogin();if(!e.error){let r=String(e.count);"0"!==r&&"undefined"!==r||(r=""),t&&t(e.result||0,r)}}catch(e){t&&t(null,null,e)}}})}};